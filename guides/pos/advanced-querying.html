

<!DOCTYPE html>

	<html lang="en-GB">

	<head>
		<meta charset="UTF-8">
		<meta http-equiv="x-ua-compatible" content="ie=edge">
		<meta name="viewport" content="width=device-width, minimum-scale=1.0">
		
			<title>Querying Code Snippets | AEVI AppFlow</title>
		
		
		
		<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=IBM+Plex+Mono|IBM+Plex+Sans:400,400i,500,500i,700,700i">
		<link rel="stylesheet" href="/pos-android-sdk/dox-theme/assets/css/style.css">
		<link rel="icon" href="/pos-android-sdk/icon_large.png" sizes="32x32">
		<link rel="icon" href="/pos-android-sdk/icon_large.png" sizes="192x192">
		<link rel="apple-touch-icon-precomposed" href="/pos-android-sdk/icon_large.png">
		<meta name="msapplication-TileImage" content="/pos-android-sdk/icon_large.png">
	</head>
	<body>
		
			<div class="c-offcanvas">
				<div class="c-offcanvas__inner">
					
						<ul class="c-nav c-nav--stacked u-mx-auto">
							
								<li><a href="/pos-android-sdk/intro">Introduction</a></li>
							
								<li><a href="/pos-android-sdk/explore">Explore</a></li>
							
								<li><a href="/pos-android-sdk/downloads">Downloads</a></li>
							
								<li><a href="/pos-android-sdk/support">Support</a></li>
							
						</ul><!-- /.c-nav -->
					
					
						
							<a href="/reference" class="c-btn c-btn--md c-btn--gray u-text-md">
								Reference
								<div class="c-btn__icon">
									<i class="o-icon o-icon--folder"></i>
								</div>
							</a>
						
					
				</div><!-- /.c-offcanvas__inner -->
			</div><!-- /.c-offcanvas -->
		

		
			<header class="c-header">
				<div class="o-container">
					<div class="o-row">
						<div class="o-col-12">
							<div class="u-flex u-items-center">
								
									<div class="c-logo">
										<a href="/pos-android-sdk/" class="c-logo__link">
											<img src="/pos-android-sdk/aevi_logo.svg">
										</a><!-- /.c-logo__link -->
									</div><!-- /.c-logo -->
								
								
									<div class="u-flex u-items-center u-ml-auto">
										
											<ul class="c-nav u-mb-0 u-hidden u-block@lg">
												
													
													<li class=""><a href="/pos-android-sdk/intro">Introduction</a></li>
												
													
													<li class=""><a href="/pos-android-sdk/explore">Explore</a></li>
												
													
													<li class=""><a href="/pos-android-sdk/downloads">Downloads</a></li>
												
													
													<li class=""><a href="/pos-android-sdk/support">Support</a></li>
												
											</ul><!-- /.c-nav -->
										
										
											<div class="u-ml-5 u-hidden u-block@lg">
												
													<a href="/pos-android-sdk/reference" class="c-btn c-btn--md c-btn--gray u-text-md">
														Reference
														<div class="c-btn__icon">
															<i class="o-icon o-icon--folder"></i>
														</div>
													</a>
												
											</div>
										
									</div>
								
								<button class="c-hamburger-icon c-hamburger-icon--slider js-hamburger-icon js-offcanvas-toggle u-ml-auto u-hidden@lg" type="button">
									<span class="c-hamburger-icon__box">
										<span class="c-hamburger-icon__inner"></span>
									</span><!-- /.c-hamburger-icon__box -->
								</button><!-- /.c-hamburger-icon -->
							</div>
						</div><!-- /.o-col -->
					</div><!-- /.o-row -->
				</div><!-- /.o-container -->
			</header><!-- /.c-header -->
		







	
		<div class="c-hero u-bg-gray-30 u-pt-16 u-pb-10">
	
		<div class="o-container">
			<div class="o-row">
				<div class="o-col-10@lg o-col-9@xl">
					
						<h2 class="u-text-lg u-text-xl@sm">Flow Initiation</h2>
					
					
						<div class="u-h6">
							<p>Querying examples</p>
						</div>
					
					
					
				</div><!-- /.o-col -->
			</div><!-- /.o-row -->
		</div><!-- /.o-container -->
	</div>






	<div class="u-pt-8 u-pb-5">
		<div class="o-container">
			<div class="o-row">
				
					<div class="o-col-8@lg o-col-7@xl">
						<div class="c-post u-mb-3@lg js-post">
							<p>All the operations documented here assumes that you already have access to the <code class="highlighter-rouge">PaymentSettings,</code> which can be retrieved as per below</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">paymentClient</span><span class="o">.</span><span class="na">getPaymentSettings</span><span class="o">()</span>
  <span class="o">.</span><span class="na">subscribe</span><span class="o">(</span><span class="n">paymentSettings</span> <span class="o">-&gt;</span> <span class="o">{</span>
         <span class="c1">// Use for the operations on this page</span>
   <span class="o">});</span>
</code></pre></div></div>

<h2 id="flow-configuration-operations">Flow configuration operations</h2>

<p>This lists some useful operations. For a full list of API methods, please see the <a href="https://s3-eu-west-1.amazonaws.com/pos-flow-docs/javadocs/latest/payment-initiation-api/com/aevi/sdk/pos/flow/model/config/FlowConfigurations.html">FlowConfiguration javadocs</a>.</p>

<h4 id="get-a-list-of-all-flow-configurations">Get a list of all flow configurations</h4>

<p>Returns a list of all the current flow configurations.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">List</span><span class="o">&lt;</span><span class="n">FlowConfig</span><span class="o">&gt;</span> <span class="n">flowConfigurations</span> <span class="o">=</span> <span class="n">paymentSettings</span><span class="o">.</span><span class="na">getFlowConfigurations</span><span class="o">().</span><span class="na">getAll</span><span class="o">();</span>
</code></pre></div></div>

<h4 id="check-if-a-flow-type-is-supported">Check if a flow type is supported</h4>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>paymentSettings.getFlowConfigurations().isFlowTypeSupported("sale");
</code></pre></div></div>

<h4 id="get-all-flow-types">Get all flow types</h4>

<p>You can either query for all flow types (pass in <code class="highlighter-rouge">null</code>) or specifically for payment flows or generic flows.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">paymentSettings</span><span class="o">.</span><span class="na">getFlowConfigurations</span><span class="o">().</span><span class="na">getFlowTypes</span><span class="o">(</span><span class="kc">null</span><span class="o">);</span>
<span class="n">paymentSettings</span><span class="o">.</span><span class="na">getFlowConfigurations</span><span class="o">().</span><span class="na">getFlowTypes</span><span class="o">(</span><span class="n">FlowConfig</span><span class="o">.</span><span class="na">REQUEST_CLASS_PAYMENT</span><span class="o">);</span>
<span class="n">paymentSettings</span><span class="o">.</span><span class="na">getFlowConfigurations</span><span class="o">().</span><span class="na">getFlowTypes</span><span class="o">(</span><span class="n">FlowConfig</span><span class="o">.</span><span class="na">REQUEST_CLASS_GENERIC</span><span class="o">);</span>
</code></pre></div></div>

<h4 id="get-flow-details-from-type">Get flow details from type</h4>

<p>There can be more than one flow per type, differentiated by the <em>flow name</em>. For instance, there may be a flow named <code class="highlighter-rouge">basicSale</code> that has no loyalty apps, whereas <code class="highlighter-rouge">loyaltySale</code> does. They are both of type <code class="highlighter-rouge">sale</code>.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">paymentSettings</span><span class="o">.</span><span class="na">getFlowConfigurations</span><span class="o">().</span><span class="na">getFlowNamesForType</span><span class="o">(</span><span class="s">"sale"</span><span class="o">);</span>
</code></pre></div></div>

<p>The name can then be used to set in the  request to initiate a flow, or to query for flow details</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">paymentSettings</span><span class="o">.</span><span class="na">getFlowConfigurations</span><span class="o">().</span><span class="na">getFlowConfiguration</span><span class="o">(</span><span class="s">"loyaltySale"</span><span class="o">);</span>
</code></pre></div></div>

<h4 id="filter-flow-configurations">Filter flow configurations</h4>

<p>If you want to filter flow configurations by some criteria, you can use <code class="highlighter-rouge">stream()</code>. The below filters based on whether the flow contains the <code class="highlighter-rouge">TRANSACTION_PROCESSING</code> stage or not.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">paymentSettings</span><span class="o">.</span><span class="na">getFlowConfigurations</span><span class="o">().</span><span class="na">stream</span><span class="o">()</span>
                <span class="o">.</span><span class="na">filter</span><span class="o">(</span><span class="n">flowConfig</span> <span class="o">-&gt;</span> <span class="n">flowConfig</span><span class="o">.</span><span class="na">hasStage</span><span class="o">(</span><span class="n">FlowStages</span><span class="o">.</span><span class="na">TRANSACTION_PROCESSING</span><span class="o">))</span>
                <span class="o">.</span><span class="na">subscribe</span><span class="o">(</span><span class="n">flowConfig</span> <span class="o">-&gt;</span> <span class="o">{</span>
                    <span class="c1">// Do something</span>
                <span class="o">});</span>
</code></pre></div></div>

<h2 id="flow-service-operations">Flow service operations</h2>

<p>This lists some useful operations. For a full list of API methods, please see the <a href="https://s3-eu-west-1.amazonaws.com/pos-flow-docs/javadocs/latest/payment-initiation-api/com/aevi/sdk/pos/flow/model/PaymentFlowServices.html">PaymentFlowServices javadocs</a> and <a href="https://s3-eu-west-1.amazonaws.com/pos-flow-docs/javadocs/latest/payment-initiation-api/com/aevi/sdk/pos/flow/model/PaymentFlowServiceInfo.html">PaymentFlowServiceInfo javadocs</a>.</p>

<h4 id="get-a-list-of-all-flow-services">Get a list of all flow services</h4>

<p>Returns a list of all installed flow services on the device.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">List</span><span class="o">&lt;</span><span class="n">PaymentFlowServiceInfo</span><span class="o">&gt;</span> <span class="n">flowServices</span> <span class="o">=</span> <span class="n">paymentSettings</span><span class="o">.</span><span class="na">getPaymentFlowServices</span><span class="o">().</span><span class="na">getAll</span><span class="o">();</span>
</code></pre></div></div>

<h4 id="filter-flow-services">Filter flow services</h4>

<p>Flow services can be filtered by any of the data that is exposed by them, such as currency or payment methods. In the example, we below, we use <code class="highlighter-rouge">stream()</code> which we then apply a filter to.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">paymentSettings</span><span class="o">.</span><span class="na">getPaymentFlowServices</span><span class="o">().</span><span class="na">stream</span><span class="o">()</span>
                <span class="o">.</span><span class="na">filter</span><span class="o">(</span><span class="n">paymentFlowServiceInfo</span> <span class="o">-&gt;</span> <span class="n">paymentFlowServiceInfo</span><span class="o">.</span><span class="na">supportsCurrency</span><span class="o">(</span><span class="s">"EUR"</span><span class="o">))</span>
                <span class="o">.</span><span class="na">toList</span><span class="o">()</span>
                <span class="o">.</span><span class="na">subscribe</span><span class="o">(</span><span class="n">paymentFlowServiceInfos</span> <span class="o">-&gt;</span> <span class="o">{</span>
                    <span class="c1">// List of flow services that supports "EUR"               </span>
                <span class="o">});</span>
</code></pre></div></div>

<h4 id="retrieve-collated-information">Retrieve collated information</h4>

<p>The <code class="highlighter-rouge">PaymentFlowServices</code> model collates information about all the flow services into collections.</p>

<p>Example below provides a set of all the supported currencies.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Set</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">allSupportedCurrencies</span> <span class="o">=</span> <span class="n">paymentSettings</span><span class="o">.</span><span class="na">getPaymentFlowServices</span><span class="o">().</span><span class="na">getAllSupportedCurrencies</span><span class="o">();</span>
</code></pre></div></div>

<h4 id="check-for-support">Check for support</h4>

<p>The <code class="highlighter-rouge">PaymentFlowServices</code> model contains some useful “is” methods, like <code class="highlighter-rouge">isCurrencySupported()</code>, which will check across all the flow services.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">paymentSettings</span><span class="o">.</span><span class="na">getPaymentFlowServices</span><span class="o">().</span><span class="na">isCurrencySupported</span><span class="o">(</span><span class="s">"EUR"</span><span class="o">);</span>
</code></pre></div></div>


							

						</div><!-- /.c-post -->
					</div><!-- /.o-col -->
				
				
					<div class="o-col-3@lg o-offset-1@lg o-offset-2@xl">
						<ul class="c-page-nav u-sticky u-pin-t-6 u-mt-4 u-mt-1@lg u-mb-1 u-mb-4@lg">
							
							
							
								
								
									
										<li>
											<a href="/pos-android-sdk/guides/pos/get-started">
												<p class="c-page-nav__heading">Get started</p>
											</a>
										</li>
									
									
								
							
								
								
									
										<li>
											<a href="/pos-android-sdk/guides/pos/pre-requisites">
												<p class="c-page-nav__heading">Dependencies</p>
											</a>
										</li>
									
									
								
							
								
								
									
										<li>
											<a href="/pos-android-sdk/guides/pos/api-overview">
												<p class="c-page-nav__heading">API overview</p>
											</a>
										</li>
									
									
								
							
								
								
									
										<li>
											<a href="/pos-android-sdk/guides/pos/querying-for-information">
												<p class="c-page-nav__heading">Querying for information</p>
											</a>
										</li>
									
									
								
							
								
								
									
										<li>
											<a href="/pos-android-sdk/guides/pos/flow-initiation">
												<p class="c-page-nav__heading">Initiate flows</p>
											</a>
										</li>
									
									
								
							
								
								
									
										<li>
											<a href="/pos-android-sdk/guides/pos/handling-responses">
												<p class="c-page-nav__heading">Handling responses</p>
											</a>
										</li>
									
									
								
							
								
								
									
										<li>
											<a href="/pos-android-sdk/guides/pos/parse-responses">
												<p class="c-page-nav__heading">Parse responses</p>
											</a>
										</li>
									
									
								
							
								
								
									
										<li>
											<a href="/pos-android-sdk/guides/pos/handling-errors">
												<p class="c-page-nav__heading">Handling errors</p>
											</a>
										</li>
									
									
								
							
								
								
									
										<li>
											<a href="/pos-android-sdk/guides/pos/querying-for-responses">
												<p class="c-page-nav__heading">Querying for responses</p>
											</a>
										</li>
									
									
								
							
								
								
									
										<li>
											<a href="/pos-android-sdk/guides/pos/events-subscription">
												<p class="c-page-nav__heading">System events</p>
											</a>
										</li>
									
									
								
							
								
								
									
										<li>
											<a href="/pos-android-sdk/guides/pos/status-update-flows">
												<p class="c-page-nav__heading">Status update flows</p>
											</a>
										</li>
									
									
								
							
								
								
									
										<li>
											<a href="/pos-android-sdk/guides/pos/application-guidelines">
												<p class="c-page-nav__heading">Application guidelines</p>
											</a>
										</li>
									
									
								
							
								
								
									
										<li>
											<a href="/pos-android-sdk/guides/pos/next-steps">
												<p class="c-page-nav__heading">Next steps</p>
											</a>
										</li>
									
									
								
							
						</ul><!-- /.c-page-nav -->
					</div><!-- /.o-col -->
				
			</div><!-- /.o-row -->
		</div><!-- /.o-container -->
	</div>



	
	
		<div class="u-bg-primary u-text-white u-pt-3 u-pt-4@sm u-pb-3 u-pb-4@sm">
			<div class="o-container">
				<div class="o-row">
					<div class="o-col-12 u-text-center">
						<div class="u-inline-block u-flex@sm">
							
							
							 	
							
							 	
							
							 	
							
							 	
							
							 	
							
							 	
							
							 	
							
							 	
							
							 	
							
							 	
							
							 	
							
							 	
							
							 	
							
						</div>
					</div><!-- /.o-col -->
				</div><!-- /.o-row -->
			</div><!-- /.o-container -->
		</div>
		

		
			<footer class="c-footer">
				<div class="o-container">
					<div class="o-row">
						<div class="o-col-12 u-mt-6 u-mt-8@md u-mb-4 u-mb-6@md">
							
								<p class="c-logo u-mb-1">
									AEVI AppFlow
								</p><!-- /.c-logo -->
							
							
								<p>Copyright &copy;2019. - AEVI International GmbH <br>All rights reserved.</p>
							
						</div><!-- /.o-col -->
					</div><!-- /.o-row -->
				</div><!-- /.o-container -->
			</footer><!-- /.c-footer -->
		

		<script type="text/javascript" src="/pos-android-sdk/dox-theme/assets/js/vendor/jquery-3.3.1.min.js"></script>
		<script type="text/javascript" src="/pos-android-sdk/dox-theme/assets/js/scripts.min.js"></script>

		

	</body>
</html>

	

